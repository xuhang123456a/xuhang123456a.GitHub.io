---
# 文章的Front Matter配置（Jekyll会自动生成分类/标签）
title: "Unity关卡生成器的10个优化点"
date: 2026-01-10 15:30:00
categories: Unity开发
tags: [Unity, 关卡生成, 性能优化]
---

# Unity关卡生成器的10个优化点
最近优化了项目里的关卡生成器，总结几个核心优化点，分享给大家~


## 1. 预计算权重前缀和（性能优化）
原代码的权重计算是O(n²)，改成预计算前缀和后，时间复杂度降到O(n)，代码如下：
```csharp
// 优化前（重复累加）
int needWeight = _currentPhaseConfig.weightArr[0];
for (int n = 1; n <= m; n++) {
  needWeight += _currentPhaseConfig.weightArr[n];
}

// 优化后（预计算前缀和）
int[] prefixSum = new int[weightArr.Length];
prefixSum[0] = weightArr[0];
for (int i = 1; i < weightArr.Length; i++) {
  prefixSum[i] = prefixSum[i-1] + weightArr[i];
}