---
layout: post
title: A03-程序相关优化
date: 2026-01-31 23:04:21 +0000
author: xuhang
tags: ["游戏引擎", "Unity", "UE", "unity学习"]
---

# A03-程序相关优化

- [Unity使用/机制优化小结]()
- [脚本优化小结]()
- [【Unity】代码优化]()
- [托管堆内存占用优化]()
- [lua代码优化]()

---

以下来自[Unity游戏项目性能优化总结](https://zhuanlan.zhihu.com/p/24392681)

# Unity使用/机制优化小结

- GameObject的SpawnPool应支持“移出屏幕”功能
- Transform的孩子不应过多
- 应减少粒子系统的Play()的调用次数
- 应减少每帧Material.GetXX()/Material.SetXX()的次数
- 应使用支持Conditional的日志输出机制

# 脚本优化小结

- 依然需要减少GetComponent()的频率
- 应减少UnityEngine.Object的null比较
- 应减少不必要的Transform.position/rotation等访问
- 应尽量减少创建C#堆内存对象
- 应为struct对象重载所有object函数
- 如果可能，尽量用Queue/Stack来代替List
- 应注意容器的初始化capacity
- 应尽量为类或函数声明为sealed
- 减少Dictionary的冗余访问

# 【Unity】代码优化

[【Unity】代码优化](https://zhuanlan.zhihu.com/p/51491283)

# 托管堆内存占用优化

mono的堆内存一旦分配，就不会返还给系统，这意味着mono的堆内存只升不降

1. 不要在Update、FixedUpdate或较高调用频率的函数中开辟堆内存
2. log输出
3. 使用StringBuilder代替String连接、部分引擎API（GetComponent）的使用等等
4. 对于局部变量或非常驻变量，尽可能使用Struct来代替Class
5. 尽可能地复用变量，减少new的次数

# lua代码优化

[Unity性能优化系列—Lua代码优化](https://blog.uwa4d.com/archives/UWA_ReportModule4.html)
